{
  "hash": "054b832b28fe756375396030f4455466",
  "result": {
    "markdown": "---\ntitle: Survey on Gender Equality at Home\nformat:\n  360-analysis-html: default\nauthor: James Goldie\ndate: last-modified\ncode-fold: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at /workspaces/report-iwd2024\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhere(\"data\", \"geah2020-2021-asiapacific.csv\") |>\n  read_csv() |>\n  janitor::clean_names() ->\nall_data\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 879 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): Geography, Question Code, Question Text, Response Category, Respons...\ndbl (2): Year, Value\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_data |>\n  filter(question_code == \"B.24\") |>\n  # code hours as an ordered factor\n  mutate(\n    response_category = factor(response_category,\n      levels = c(\n        \"No time spent on these activities\",\n        \"Less than 1 hour\",\n        \"Between 1 and 2 hours\", \"Between 2 and 3 hours\",\n        \"Between 3 and 4 hours\", \"Between 4 and 5 hours\",\n        \"Between 5 and 7 hours\", \"Between 7 and 9 hours\",\n        \"Between 9 and 11 hours\", \n        \"More than 11hrs\"),\n      labels = c(\n        \"0\", \"<1\", \"1-2\", \"2-3\", \"3-4\", \"4-5\", \"5-7\", \"7-9\", \"9-11\", \">11\")),\n    gender = str_to_sentence(gender)) |>\n  filter(gender != \"combined\") |>\n  write_csv(here(\"data\", \"geah2021-hrs-domestic-care.csv\")) ->\nq_b24\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# first kee pcountries together\nggplot(q_b24) +\n  aes(x = geography, y = value, fill = response_category) +\n  geom_col() +\n  facet_wrap(vars(gender)) +\n  scale_fill_brewer(palette = \"RdBu\", direction = -1) +\n  scale_y_continuous(\n    breaks = seq(0, 100, by = 20),\n    labels = scales::label_number(suffix = \"%\")) +\n  coord_flip() +\n  theme_minimal() +\n  theme(\n    strip.text = element_text(face = \"bold\", hjust = 0)\n  ) +\n  labs(\n    x = NULL, y = \"% of respondents\",\n    fill = \"Hours/day\",\n    title = \"Domestic and care work (2021)\",\n    subtitle = str_wrap(q_b24$question_text[1], 120)) ->\nplot_b24_bycountry\n\nggsave(here(\"out\", \"assets\", \"geah-bycountry.png\"), plot_b24_bycountry, bg = \"white\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n\n```{.r .cell-code}\n# then keep gender comparisons together\n\nggplot(q_b24) +\n  aes(x = gender, y = value, fill = response_category) +\n  geom_col() +\n  facet_wrap(vars(geography)) +\n  scale_fill_brewer(palette = \"RdBu\", direction = -1) +\n  scale_y_continuous(\n    breaks = seq(0, 100, by = 20),\n    labels = scales::label_number(suffix = \"%\")) +\n  coord_flip() +\n  theme_minimal() +\n  theme(\n    strip.text = element_text(face = \"bold\", hjust = 0)\n  ) +\n  labs(\n    x = NULL, y = \"% of respondents\",\n    fill = \"Hours/day\",\n    title = \"Domestic and care work (2021)\",\n    subtitle = str_wrap(q_b24$question_text[1], 120)) ->\nplot_b24_bygender\n\nggsave(here(\"out\", \"assets\", \"geah-bygender.png\"), plot_b24_bygender, bg = \"white\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}