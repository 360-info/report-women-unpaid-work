{
  "hash": "31e7e471be6048c1aace2396929f75d5",
  "result": {
    "markdown": "---\ntitle: Time Use in India, 2019\nformat:\n  360-analysis-html: default\nauthor: James Goldie\ndate: last-modified\ncode-fold: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(themes360info)\nlibrary(ggtext)\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at /workspaces/report-iwd2024\n```\n\n\n:::\n:::\n\n\n# Getting the data\n\nAlthough the full report is available upon request, today we're just visualising some headline tables from the [Press Information Bureau's press release](https://www.pib.gov.in/PressReleasePage.aspx?PRID=1660028).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlist.files(here(\"data\"), pattern = glob2rx(\"timeuse-india2019*.csv\"),\n  full.names = TRUE) |>\n  tibble(path = _, fname = basename(path)) |>\n  separate(fname, into = c(\"timeuse\", \"india2019\", \"measure\", \"ext\")) |>\n  mutate(data = map(path, read_csv)) |>\n  select(-c(path, timeuse, india2019, ext)) |>\n  unnest(data) ->\nall_data\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 9 Columns: 10\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): activity\ndbl (9): male_rural, female_rural, person_rural, male_urban, female_urban, p...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\nRows: 10 Columns: 10\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): activity\ndbl (9): male_rural, female_rural, person_rural, male_urban, female_urban, p...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\nRows: 9 Columns: 10\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): activity\ndbl (9): male_rural, female_rural, person_rural, male_urban, female_urban, p...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\nThere are three tables (under the `measure` key) here:\n\n1. Percentage of persons of age 6 years and above participating in different activities in a day\n2. Average time (in minutes) spent in a day per participant of age 6 years and above in different activities\n3. Percentage share of total time in different activities in a day per person of age 6 years and above\n\nTable 2 refers to the average time spend per day for each person who participated — not for each person surveyed. I'm assuming that multiplying tables 1 and 2 together and dividing that through by the number of minutes in the day (1440) gets you table 3. Let's rehsape the data in order to verify that.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# now instead of making it wide by sex + area,\n# make it wide by table number (measure)\nall_data |>\n  pivot_longer(\n    -c(measure, activity),\n    names_to = c(\"sex\", \"area\"),\n    names_sep = \"_\") |>\n  pivot_wider(names_from = measure, values_from = value) |>\n  select(activity, sex, area, percentage, minutes, pctshare) |>\n  mutate(across(c(percentage, pctshare), \\(x) x / 100)) ->\nall_data_bymeasure\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nall_data_bymeasure |>\n  mutate(\n    pctshare_manual = percentage * minutes / 1440,\n    pctshare_diff = pctshare_manual - pctshare) ->\nall_data_bymeasure_manual\n\n# let's quickly check the size of the difference\nhist(all_data_bymeasure_manual$pctshare_diff)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/verify-tables-1.png){width=672}\n:::\n:::\n\n\nThe differences are all within 0.001, which was the significance of the original figures provided after I divided the percentages by 100, so it seems like my understanding is correct here.\n\n## Gendered differences\n\nKnowing this, I'm interested in the twofold effect on unpaid domestic and care work: that (a) more women than men participate in it, and (b) that those who do  spend more time doing it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nall_data_bymeasure_manual |>\n  select(activity, sex, area, percentage, minutes, share = pctshare_manual) |>\n  filter(\n    area != \"all\",\n    sex != \"person\",\n    activity %in% c(\n      \"Unpaid domestic services for household members\",\n      \"Unpaid caregiving services for household members\")) |>\n  arrange(sex) |>\n  group_by(activity, area) |>\n  summarise(across(where(is.numeric), \\(x) x[1] / x[2])) |>\n  mutate(\n    activity_short = case_match(activity,\n      \"Unpaid domestic services for household members\"   ~ \"Domestic work\",\n      \"Unpaid caregiving services for household members\" ~ \"Care work\"),\n    facet_label = paste0(activity_short, \" in \", area, \" areas\"),\n    facet_ann = paste0(\n      \"Share of time<br>\",\n      '<span style=\"font-size: 18pt; font-face: bold;\">',\n        round(share, 1), \"x</span>\")) ->\ngender_ratios\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'activity'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngender_ratios |>\n  select(activity_short, activity, area, percentage, minutes, share) |>\n  write_csv(here(\"data\", \"ratios-india2019.csv\"))\n```\n:::\n\n\n:::{.callout}\nAlthough the differences found from manually calculating table 3 are within the significant figures provided for table 3, they do start to multiply out when you start calculating ratios. For example, for Unpaid caregiving across all areas, the ratio of women's percentage share is 3.48x when using the manually calculated percentage share figures but \n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(gender_ratios) +\n  geom_rect(\n    aes(xmin = 0, ymin = 0, xmax = percentage, ymax = minutes),\n    fill = \"orange\", alpha = 0.75) +\n  geom_rect(\n    aes(xmin = 0, ymin = 0, xmax = 1, ymax = 1),\n    fill = \"black\", alpha = 0.75) +\n  geom_richtext(\n    aes(x = percentage, y = minutes, label = facet_ann),\n    hjust = 1, nudge_x = -0.05, vjust = 1, nudge_y = -0.05,\n    label.colour = NA, fill = NA, family = \"Body 360info\") +\n  facet_wrap(vars(facet_label)) +\n  coord_fixed() +\n  scale_x_continuous(\n    labels = scales::label_number(suffix = \"x\")) +\n  scale_y_continuous(\n    labels = scales::label_number(suffix = \"x\")) +\n  theme_360(base_size = 18) +\n  theme(\n    strip.text = element_text(face = \"bold\", hjust = 0),\n    panel.grid.minor = element_blank(),\n    axis.title = element_text(face = \"plain\")) +\n  labs(\n    x = \"Girls and women were more likely to do...\",\n    y = \"Girls and women spent more time doing...\",\n    title = toupper(\"Unpaid work in the home across India\"),\n    caption = paste(\n      \"**CHART:** James Goldie, 360info\",\n      \"**DATA:** Time Use Survey 2019\",\n      \"Ministry of Statistics and Programme Implementation, Indian Government\",\n      sep = \"<br>\"),\n    subtitle = paste(\n      \"Girls and women aged 6+ surveyed in India (n = 447,250) were **more likely**\",\n      \"than boys and men to report doing unpaid domestic or care work in the house.\",\n      \" Those who did also reported **spending more time** doing it.\",\n      sep = \"<br>\")) ->\nratio_plot\n\nsave_360plot(ratio_plot, here(\"out\", \"assets\", \"gender-ratios.png\"))\n```\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}